<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создание и удаление елементов</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <section>
        <a href="../11_DOM.html"><<назад</a>
        <h1>Создание и удаление элементов</h1>
        <p>
            DOM API позволяет не только выбирать или изменять уже существующие, но и удалять, а так же создавать новые элементы, после чего добавлять их в документ.
<br><br>
<h2>Создание</h2>
<code>
    document.createElement(tagName);
</code>
<br>
Создает элемент с именем tagName и возвращает ссылку на него как результат своего выполнения. tagName - это строка, указывающая тип создаваемого элемента. Элемент создается в памяти, в DOM его еще нет.
<br><br>
<code>
    const heading = document.createElement("h1");<br>
console.log(heading); // <h1></h1><br>

heading.textContent = "This is a heading";<br><br>
console.log(heading); //This is a heading
<br>
const image = document.createElement("img");<br><br>
image.src = "";<br><br>
image.alt = "Nature";<br><br>
console.log(image); // <img src="" alt="Nature" /><br><br>
<br><br>
</code>
<h2>Добавление</h2>
<br>
Чтобы созданный элемент был отображен на странице, его необходимо добавить к уже существующему элементу в DOM-дереве. Допустим, что добавляем в некий элемент element, для этого есть методы.
<br><br>
<code>
  <br><br>  element.append(el1, el2, ...) - добавляет один или несколько элементов после всех детей элемента element.
<br><br>element.prepend(el1, el2, ...) - добавляет один или несколько элементов перед всеми детьми элемента element.
<br><br>element.after(el1, el2, ...) - добавляет один или несколько элементов после элемента element.
<br><br>element.before(el1, el2, ...) - добавляет один или несколько элементов перед элементом element.
</code><br>
Во всех этих методах, el это элементы или строки, в любом сочетании и количестве. Строки добавляются как текстовые узлы.
<br><br>

<h4>
    ИНТЕРЕСНО
Если элемент для вставки уже находится в DOM, то он изымается из своего старого места и добавляется в новое. Отсюда вытекает правило - один и тот же элемент не может быть одновременно в двух местах.

</h4>
<h2>Удаление</h2>

<code>
    elem.remove();
</code>
<br><br>
Для того, чтобы удалить элемент используется метод remove(). Он вызывается на самом элементе elem, который необходимо удалить

<br><br>
Оптимизация работы с DOM
Современные браузеры стараются оптимизировать процесс отрисовки страницы без вмешательства разработчика. Тем не менее, изменение DOM-дерева это дорогая операция, поэтому необходимо стараться минимизировать количество обращений к DOM.
<br><br>
<ul>
    <li>Repaint - происходит, когда изменения затронули стили влияющие на внешний вид элемента, но не на геометрию. Например opacity, background-color, visibility и outline. Браузер отрисовывает элемент заново, с учётом нового стиля. Также проверяется видимость других элементов, один или более могут оказаться скрыты под изменившим внешний вид.
</li>
    <li>Reflow - происходит когда изменения затрагивают содержимое, структуру документа, положение элементов. Идет пересчет позиционирования и размеров, что ведет к перерисовке части или всего документа. Изменение размера одного родительского контейнера повлияет на всех его детей и предков. Имеет значительно большее влияние на производительность, чем repaint.
</li>
</ul>

<br>
Все вышеперечисленные операции блокируют браузер. Страница не может выполнять никакие другие операции в то время, когда происходит reflow или repaint. Причинами могут быть:
<br><br>
<br>Манипуляции с DOM (добавление, удаление, изменение, перестановка элементов)
<br>Изменение содержимого, в т.ч. текста в полях форм
<br>Расчёт или изменение CSS-свойств
<br>Добавление и удаление таблиц стилей
<br>Манипуляции с атрибутом class
<br>Манипуляции с окном браузера (изменения размеров, прокрутка)
<br>Активация псевдоклассов (например :hover)
        </p>
    </section>
  
</body>
</html>