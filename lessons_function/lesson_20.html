<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Область видимости</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <section>
        <a href="../4_function.html"><<назад</a>
        <h1>Область видимости</h1>
        <p>
Область видимости (scope) - механизм который определяет доступность переменных в исполняемом коде.
<br><br>
Цепочка областей видимости (scope chain) - области видимости образуют иерархию, так что дочерние области имеют доступ к переменным из родительских областей, но не наоборот.

<h4>
  ИНТЕРЕСНО
Переменная видна для исполняемого кода, если она есть в текущей области видимости или в цепочке областей видимости.

</h4>

<h2>
  Глобальная область видимости
</h2>

Переменные, объявленные на самом верхнем уровне, то есть вне любых конструкций вроде if, while, for и функций, находятся в глобальной области видимости и доступны везде после их объявления.

<code>
  const globalValue = 10;
<br>
<br> console.log(globalValue); // 10
<br> 
<br> function foo() {
<br>   console.log(globalValue); // 10
<br> }
<br> 
<br> for (let i = 0; i < 5; i++) {
<br>   console.log(globalValue); // 10
<br> 
<br>   if (i === 2) {
<br>     console.log(globalValue); // 10
<br>   }
<br> }
</code>

<h2>
  Блочная область видимости
</h2>

Переменные, объявленные внутри инструкций if, for, функций и других блоков кода обрамлённых фигурными скобками {}, находятся в блочной области видимости и доступны только внутри этого блока кода или вложенных в него.

<code>
  function foo() {
<br>   const a = 20;
<br>   console.log(a); // 20
<br> 
<br>   for (let i = 0; i < 5; i++) {
<br>     console.log(a); // 20
<br> 
<br>     if (i === 2) {
<br>       console.log(a); // 20
<br>     }
<br>   }
<br> }
<br> 
<br> // ❌ Ошибка! Переменная a не доступна в глобальной области видимости
<br> console.log(a);
<br> 
<br> for (let i = 0; i < 3; i++) {
<br>   // ❌ Ошибка! Переменная a не доступна в этой области видимости
<br>   console.log(a);
<br> }
</code>

Это можно представить как дом с комнатами. Дом находится в глобальной области видимости. Каждая функция и блок создают новую комнату, вложенную внутрь дома. Переменные, объявленные внутри этих комнат, доступны только тогда, когда вы находитесь внутри этой комнаты. Вне комнаты эти переменные недоступны.

<code>
  for (let i = 0; i < 5; i++) {
<br>   const a = 20;
<br>   console.log(a); // 20
<br> 
<br>   if (i === 2) {
<br>     const b = 30;
<br>     console.log(a); // 20
<br>     console.log(b); // 30
<br>   }
<br> 
<br>   if (i === 3) {
<br>     console.log(a); // 20
<br> 
<br>     // ❌ Ошибка! Переменная b не доступна в этой области видимости
<br>     console.log(b);
<br>   }
<br> }
</code>

<h2>
  Поиск по цепочке областей видимости
</h2>

Интерпретатор пытается сначала найти переменную в той области видимости, в которой к ней обратились. Если такой переменной в локальной области видимости нет, то он выходит наружу, на один уровень за попытку, пока не найдёт значение или не дойдет до самой верхней области видимости (глобальной) и поймет, что переменную с таким идентификатором невозможно найти, так как ее просто нет, тогда будет ошибка о том, что переменная не объявлена.


        </p>
    </section>
</body>
</html>