<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Всплытие событий</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <section>
        <a href="../13_deleg_evt.html"><<назад</a>
        <h1>Всплытие событий</h1>
        <p>

          При наступлении события, обработчики сначала срабатывают на самом вложенном элементе, затем на его родителе, затем выше и так далее, вверх по цепочке вложенности. Этот процесс называется всплытием (event bubbling), потому что события «всплывают» от внутреннего элемента вверх через всех предков до window, подобно тому, как всплывает пузырек воздуха в воде.
         <br><br>
          Рассмотрим пример, так будет понятнее. Есть три вложенных тега div с обработчиками клика на каждом из них.
<br>
<code>
<br>  div id="parent"
<br>  Parent
<br>  div id="child"
<br>    Child
<br>    div id="descendant">Descendant /div
<br>  /div
<br> /div
</code>
<br>
Всплытие гарантирует, что клик по #descendant вызовет обработчик клика, если он есть, сначала на самом #descendant, затем на элементе #child, далее на элементе #parent и так далее вверх по цепочке предков до window. Поэтому, если в примере кликнуть на #descendant, то последовательно выведутся alert для descendant → child → parent.
<br>

<h4>ИНТЕРЕСНО
Всплывают почти все события, например события focus и blur не всплывают, поэтому сущестуют их всплывающие аналоги - focusin и focusout.
</h4>
<h2>Свойство event.target</h2>

Не зависимо от того где мы поймали событие во время его всплытия, всегда можно узнать где конкретно оно произошло. Самый глубокий элемент, который вызывает событие, называется целевым или исходным и доступен как event.target.
<br>
<ul>
  <li><i>event.targe</i> - это ссылка на исходный элемент на котором произошло событие, в процессе всплытия он неизменен.
</li>
  <li><i>event.currentTarget</i> - это ссылка текущий элемент до которого дошло всплытие, на нём сейчас выполняется обработчик события.
</li>
</ul>
 Если слушатель события зарегистрирован на самом верхнем элементе, то он «поймает» все клики внутри, потому что события будут всплывать до этого элемента. Откройте консоль в примере и покликайте, event.target это всегда исходный (и самый глубокий) элемент на котором был сделан клик, а event.currentTarget не меняется.

<h2>Прекращение всплытия</h2>
Обычно событие будет всплывать наверх до элемента window, вызывая все обработчики на своем пути. Но любой промежуточный обработчик может решить, что событие полностью обработано и остановить всплытие вызвав метод stopPropagation().
<br><br>

Если у элемента есть несколько обработчиков на одно событие, то даже при прекращении всплытия все они будут выполнены. То есть, метод stopPropagation() только препятствует продвижению события дальше. Если необходимо полностью остановить обработку события, используется метод <code>
   stopImmediatePropagation()
</code> Он не только предотвращает всплытие, но и останавливает обработку событий на текущем элементе.

<h4>ИНТЕРЕСНО
Не прекращайте всплытие без необходимости. Прекращение всплытия создаёт свои подводные камни, которые потом приходится обходить. Например, аналитика использует всплытие чтобы отслеживать события на странице.
  </h4>
      </p>
    </section>

    <h2>Примеры</h2>

<div id="parent">
  Parent
  <div id="child">
    Child
    <div id="descendant">Descendant</div>
  </div>
</div>


<style>
#parent,
#child,
#descendant {
  margin: 16px;
  padding: 16px;
  border: 4px solid #212121;
  border-radius: 8px;
  color: #fff;
  font-weight: 500;
  font-size: 20px;
  text-transform: uppercase;
}

#parent {
  background-color: #673ab7;
}

#child {
  background-color: #448aff;
}

#descendant {
  background-color: #ff9800;
}
</style>

    <script src="../js/63.js" type="module"></script>
</body>
</html>