<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Делегирование событий</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <section>
        <a href="../12_events.html"><<назад</a>
        <h1>Делегирование событий</h1>
        <p>
Всплытие позволяет реализовать один из самых полезных приёмов - делегирование событий (event delegation). Он заключается в том, что если есть группа элементов, события которых нужно обрабатывать одинаково, то добавляется один обработчик на их общего предка, вместо того чтобы добавлять обработчик каждому элементу. Используя свойство event.target можно получить ссылку на целевой элемент, понять на каком именно потомке произошло событие и обработать его.
<br><br>
Рассмотрим делегирование на примере. Создаем элемент div, добавляем в него произвольное количество кнопок, например 100, и регистриуем каждой из них слушателя события клика с функцией handleButtonClick .
<img src="../img/before-delegation.png" alt="before" width="100%">
<br><br>
Проблема в том, что у нас есть сто слушателей событий. Все они указывают на одну и ту же функцию слушателя, но самих слушателей 100. Что если мы переместим всех слушателей на общего предка, элемент div?
<img src="../img/after-delegation.png" alt="after" width="100%">
  <br><br>
Теперь есть только один обработчик события клика и браузеру не нужно хранить в памяти сто различных слушателей. То есть делегирование сводится к трём простым шагам.
<br><br>

<ul>
  <li>Определить общего предка группы элементов для отслеживания событий</li>
  <li>Зарегистрировать на элементе-предке обработчик события которое мы хотим отлавливать от группы элементов.
</li>
  <li>В обработчике использовать event.target для выбора целевого элемента.
</li>
</ul>
Такой подход упрощает инициализацию слушателей однотипных элементов. Можно добавлять, удалять или изменять элементы, при этом не нужно вручную добавлять или удалять обработчики событий.

<h2>Палитра цветов</h2>
Будем делать палитру цветов с возможностью выбрать цвет при клике и отображением выбранного цвета. Вместо того, чтобы назначать обработчик каждому элементу палитры, которых может быть очень много, повесим один слушатель на общего предка div.color-palette. В обработчике события клика используем event.target, чтобы получить элемент на котором произошло событие и связанный с ним цвет, который будем хранить в атрибуте data-color.

<p class="output">Selected color: -</p>
<div class="color-palette"></div>

<h4>ИНТЕРЕСНО!
Обязательно проверяем цель клика, чтобы это точно была кнопка, мы не хотим обрабатывать клики в элемент-контейнер. Для проверки типа элемента используем свойство nodeName.
    </h4>
      </p>
    </section>

    <style>
      body {
  margin: 8px;
}

.output {
  text-align: center;
  text-transform: uppercase;
  font-size: 24px;
  font-weight: 700;
}

.color-palette {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
  gap: 4px;
}

.color-palette .item {
  padding: 0;
  margin: 0;
  border: none;
  border-radius: 4px;
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: transform 250ms ease-in-out;
}

.color-palette .item:hover {
  transform: scale(1.1);
}
  </style>

<script src="../js/64.js" type="module"></script>
</body>
</html>